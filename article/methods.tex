\section{Methods}

\subsection{Animal Preparation}

To specifically target dopaminergic neurons for optogenetic stimulation, a mouse strain was chosen which expresses Cre recombinase under the Dopamine Transporter (DAT) promoter !!!Besh!!!cite.
Genotyping via polymerase chain reaction (PCR) using primers listed under !!! was employed to ascertain transgenic construct presence, and a total of \sessionpy{pytex_printonly('scripts/animals_tg.py')} transgenic animals and \sessionpy{pytex_printonly('scripts/animals_wt.py')} control wildtype animals are included in the study.

The VTA of the animals was injected with a solution containing recombinant Adeno-Associated Viruses (rAAVs).
The vector delivered a plasmid containing a floxed Channelrhodopsin and YFP construct ---
pAAV-EF1a-double floxed-hChR2(H134R)-EYFP-WPRE-HGHpA, a gift from Karl Deisseroth (\href{https://www.addgene.org/20298/}{Addgene plasmid \#20298}).
Construct expression was ascertained post mortem via fluorescent microscopy of formaldehyde fixated \SI{200}{\micro\metre} brain slices.

The measured animals were fitted with an optic fiber implant ($\mathrm{l=\SI{4.7}{\milli\meter} \ d=\SI{400}{\micro\meter} \ NA=0.22}$) targeting the right Ventral Tegmental Area in the midbrain.
The implant target coordinates were varied, covering the set depicted in \cref{fig:mvib,fig:mvip}.

The right side of the VTA was stimulated via an Omicron LuxX 488-60 laser (\SI{488}{\nano\meter}) tuned to \SI{30}{\milli\watt} at contact with the fiber implant, according to the protocols listed in \cref{tab:CogB,tab:CogBr,tab:CogBl,tab:CogBm,tab:CogMwf,tab:CogP,tab:JPogP}.
For analysis, the stimulation protocols are divided into two task groups: phasic stimulation (encompassing protocols where stimulation is delivered in short bursts of up to \SI{1}{\second} in lenght --- \cref{tab:CogP,tab:JPogP}) and block stimulation (where stimulation is delivered in continuous blocks of at least \SI{8}{\second} --- \cref{tab:CogP,tab:JPogP}).

\subsection{MR Acquisition}

All data were acquired with a Bruker PharmaScan system (\SI{7}{\tesla}, \SI{16}{\centi\meter} bore), and an in-house T/R coil, engineered to permit optic fiber implant protrusion.

Anatomical scans were acquired via a TurboRARE sequence, with a RARE factor of 8, an echo time (TE) of \SI{30}{\milli\second}, an inter-echo spacing of \SI{10}{\milli\second}, and a repetition time (TR) of \SI{2.95}{\second}.
The signal was sampled at a sagittal and horizontal resolution of $\mathrm{\Delta x(\nu)=\Delta y(\phi)=\SI{75}{\micro\meter}}$, and a coronal resolution of $\mathrm{\Delta z(t)=\SI{450}{\micro\meter}}$.

Functional scans were acquired with a flip angle of \SI{60}{\degree} and with $\mathrm{TR/TE = \SI{1000}{\milli\second}/\SI{5.9}{\milli\second}}$.
The signal is sampled at $\mathrm{\Delta x(\nu)=\Delta y(\phi)=\SI{225}{\micro\meter}}$, and $\mathrm{\Delta z(t)=\SI{450}{\micro\meter}}$ .
The functional contrast reflects the cerebral blood volume (CBV) and is generated by an iron oxide nanoparticle based contrast agent (Endorem, Laboratoire Guebet SA, France), delivered as bolus \SI{10}{\minute} before functional scan acquisition to achieve an iron concentration of $\SI{30.24}{\micro\gram\per\gram}$ of body weight.
This contrast is chosen to enable short echo-time imaging and minimize artefacts.

\subsection{Preprocessing}

Data conversion from the proprietary ParaVision format was performed via the Bruker-to-BIDS repositing pipeline \cite{aowsis} of the SAMRI package (version \textcolor{mg}{\texttt{0.4}} \cite{samri}).
Following conversion, data was dummy-scan corrected, registered, and subject to controlled smoothing via the SAMRI registration workflow \cite{irsabi}.
As part of this processing, the first 10 volumes were discarded (automatically including volumes excluded by the scanner software).
Registration was performed using the standard SAMRI mouse-brain-optimized parameter set for ANTs \cite{ants} (version \textcolor{mg}{\texttt{2.3.1}}).
Data was transformed to a stereotactically oriented standard space (the \textcolor{mg}{\texttt{dsurquec}} atlas space, as distributed in the Mouse Brain Atlases Package \cite{atlases_generator}, version \textcolor{mg}{\texttt{0.5.3}}), which is based on a high-resolution $\mathrm{T_2}$-weighted atlas \cite{dsu}.
Controlled spatial smoothing was applied in the coronal plane up to \SI{250}{\micro\meter} via the AFNI package \cite{afni}.

The registered time course data was frequency filtered depending on the analysis workflow.
For stimulus-evoked activity, the data was low-pass filtered at a period threshold of \SI{225}{\second}, and for seed-based functional connectivity, the data was band-pass filtered within a period range of \SIrange{2}{225}{\second}.

\subsection{Statistics}
Volumetric data was modelled using functions from the FSL software package \cite{fsl} (version \textcolor{mg}{\texttt{5.0.11}}).
First-level regression was applied to the temporally resolved volumetric data via FSL's \textcolor{mg}{\texttt{glm}} function, whereas the second-level analysis was applied to the first-level contrast and variance estimates via FSL's \textcolor{mg}{\texttt{flameo}}.

Stimulus-evoked first-level regression was performed using a convolution of the stimulus sequence with an opto-fMRI impulse response function, estimated by a beta fit of previously reported mouse opto-fMRI responses \cite{Grandjean2019}.
Seed-based functional connectivity analysis was performed by regressing the time course of the voxel most sensitive to the stimulus-evoked activity (per scan) in the VTA region of interest.

Brain parcellation for region-based evaluation was performed using non-overlapping multi-center labelling \cite{dsu1,dsu2,dsu3,dsu4}, as distributed in version \textcolor{mg}{\texttt{0.5.3}} of the Mouse Brain Atlases data package \cite{atlases_generator}.
The mapping operations were performed by a SAMRI function, using the nibabel \cite{nibabel} and nilearn \cite{nilearn} libraries (versions \textcolor{mg}{\texttt{2.3.1}} and \textcolor{mg}{\texttt{0.5.0}}, respectively).
Clustering for implant group categorization was performed via 1D Kmeans clustering, implemented in the scikit-learn library \cite{scikit-learn}.
Distribution density visualizations were created using the Scott bandwidth density estimator \cite{Scott1979}.

Higher-level statistical modelling was performed with the Statsmodels software package \cite{statsmodels} (version \textcolor{mg}{\texttt{0.9.9}}).
Model parameters were estimated using the ordinary least squares method, and a type 3 analysis of variance (ANOVA) was employed to control estimate variability for unbalanced categories.


\subsection{Reproducibility}

The source code for this document and all data analysis shown herein (including registration and QC workflow execution) is published according to the RepSeP specifications \cite{repsep}.
The BIDS \cite{bids} data archive which serves as the raw data recourse for this document is openly distributed \cite{opfvta_bidsdata}, as is the full instruction set for recreating this document \cite{me}.
The data analysis execution and document compilation has been tested repeatedly on numerous machines, and as such we attest that all figures and statistics presented can be reproduced based solely on the raw data, dependency list, and analysis scripts which we distribute.
